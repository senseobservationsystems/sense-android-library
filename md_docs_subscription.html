<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Sense Android Library: Data Subscription</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Sense Android Library
   &#160;<span id="projectnumber">2.7.0</span>
   </div>
   <div id="projectbrief">Android library project for the Sense Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_subscription.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Data Subscription </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Subscription manager (life cycle)</h2>
<p>Sense Library provide SubscriptionManager to keep all of the available producer as well as its subscriber. This class, like most of other class in Sense Library, is implemented with singleton pattern. Every sensor in sense library should registered to this subscriptionManager instance.</p>
<p>A DataProducer could register to subscriptionManager identified with a given name. One name in SubscriptionManager could consist of one or more different instance DataProducer. Registering an existing instance of DataProducer will do nothing.</p>
<p>A DataConsumer could subscribe to one or more DataProducer registered as certain name. If there is no DataProducer for this name yet, SubscriptionManager will still store it as subscriber and subscribe it when a new DataProducer is registered with those name.</p>
<h2>DataProducer</h2>
<p>DataProducer is an interface that specify some functionality for object that producing data, specifically SensorDataPoint object, so that one or more DataConsumer could subscribe to it. Every sensor in Sense Library is an implementation of DataProducer.</p>
<p>Sense library provide a base implementation of this interface in BaseDataProducer abstract class, and almost all of sensors in Sense library are based from this class. BaseDataProducer will store all of its subcriber in an ArrayList. This class also provide a mechanisme to notify all of it subscriber when there are new samples, and also send the SensorDataPoint to some or all of its subscribers when the sampling finished. BaseDataProducer object will check the status of it DataConsumer if they have get all the data they need before sending the data.</p>
<p>DataProducer could register to SubscriptionManager so a DataConsumer could subscribe to it.</p>
<p>mSubscrMgr = SubscriptionManager.getInstance(); testSensor = TestSensor.getInstance(ctx); mSubscrMgr.registerProducer(“TestSensor”, testSensor);</p>
<p>BaseDataProducer object like sensor should also notify and send the datapoint everytime there is a new sample.</p>
<p>notifySubscribers(); SensorDataPoint dataPoint = new SensorDataPoint(dB); dataPoint.sensorName = SensorNames.NOISE; dataPoint.sensorDescription = SensorNames.NOISE; dataPoint.timeStamp = startTimestamp; sendToSubscribers(dataPoint);</p>
<h2>DataConsumer</h2>
<p>DataConsumer is an interface that specify some functionality for object to subscribe to one or more DataProducer. By subscribing to a DataProducer, a DataConsumer object will get notification everytime there is a new data, as well as get the actual data. Class that implement this interface also need to implement a function that enabling the DataProducer to check if the DataConsumer object has all of the data it need before sending the actual data.</p>
<p>DataConsumer could subscribe to a DataProducer directly or through Subscription Manager. FallDetector and EpilepsySensor is an example of DataConsumer.</p>
<p>testConsumerSensor = TestConsumerSensor.getInstance(); dataProducer.addSubscriber(testConsumerSensor); </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 27 2015 18:00:10 for Sense Android Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
